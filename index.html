<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scratch Quest</title>
  <link rel="stylesheet" href="styles.css" />
  <meta name="description" content="Scratch Quest — transparent timeline of my path to scratch golf." />
</head>
<body>
  <header class="hero">
    <div class="container hero-inner">
      <img src="logo.jpg" alt="Scratch Quest logo" class="logo" />
      <div>
        <h1>Scratch Quest</h1>
        <p class="sub">A simple, public log of my path to a 0 handicap. Updated as I go.</p>
        <div class="stats" id="stats"></div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="bio">
      <h2>About</h2>
      <p>
        I’m a 34-year-old father with a demanding corporate career, taking up golf seriously for the first time.
        I grew up in the Midwest and played a bit as a kid, but never took lessons and only got out a few times a year.
        My goal: go from complete novice to scratch golfer in <strong>500 days</strong>.
        Day 1 will begin after I finish my first set of lessons and get my fitted clubs. Until then,
        I’m building the foundation — mobility, knowledge, and short-game skills — so I can hit the ground running.
      </p>
    </section>

    <div class="controls">
      <input id="search" type="search" placeholder="Search entries or tags…" />
      <select id="filter">
        <option value="All">All</option>
        <option>Practice</option>
        <option>Coaching</option>
        <option>Gear</option>
        <option>Fitness</option>
        <option>Content</option>
        <option>Milestone</option>
      </select>
    </div>

    <ul class="timeline" id="timeline"></ul>

    <footer class="footer">
      <p>When I buy my fitted set, the next entry will be <strong>Day 1</strong>.</p>
      <p><small>To add entries, open <code>data.js</code> and append to <code>ENTRIES</code>, then Commit & Push in GitHub Desktop.</small></p>
    </footer>
  </main>

  <script src="data.js"></script>
  <script>
    const list = document.getElementById('timeline');
    const search = document.getElementById('search');
    const filter = document.getElementById('filter');
    const statsEl = document.getElementById('stats');

    function render() {
      const q = (search.value || '').toLowerCase();
      const cat = filter.value || 'All';
      const filtered = ENTRIES.filter(e => {
        const hay = (e.title + ' ' + e.summary + ' ' + (e.tags||[]).join(' ')).toLowerCase();
        const matchesQ = !q || hay.includes(q);
        const matchesCat = cat === 'All' || e.category === cat;
        return matchesQ && matchesCat;
      });

      // Stats
      const chips = ENTRIES.flatMap(e => e.metrics||[])
        .filter(m => (m.label || '').toLowerCase().includes('chip'))
        .map(m => parseInt(String(m.value).replace(/[^0-9]/g,'')))
        .filter(n => !Number.isNaN(n))
        .reduce((a,b)=>a+b,0);
      statsEl.innerHTML = '<span><strong>' + ENTRIES.length + '</strong> entries</span> · <span><strong>' + chips + '</strong> chip shots logged</span>';

      list.innerHTML = '';
      filtered.forEach(e => {
        const li = document.createElement('li');
        li.className = 'entry';

        const metricsHTML = (e.metrics && e.metrics.length)
          ? '<div class="metrics">' + e.metrics.map(m => '<span class="metric"><strong>' + m.label + ':</strong> ' + m.value + '</span>').join('') + '</div>'
          : '';

        const tagsHTML = (e.tags && e.tags.length)
          ? '<div class="tags">' + e.tags.map(t => '<span>#' + t + '</span>').join('') + '</div>'
          : '';

        const mediaHTML = e.mediaUrl
          ? '<p><a class="link" href="' + e.mediaUrl + '" target="_blank" rel="noreferrer">Related post/video</a></p>'
          : '';

        li.innerHTML = ''
          + '<div class="meta">'
            + '<span class="date">' + e.date + '</span>'
            + (e.day ? '<span class="pill">' + e.day + '</span>' : '')
            + '<span class="pill">' + e.category + '</span>'
          + '</div>'
          + '<h3>' + e.title + '</h3>'
          + '<p>' + e.summary + '</p>'
          + metricsHTML
          + tagsHTML
          + mediaHTML;

        list.appendChild(li);
      });
    }

    search.addEventListener('input', render);
    filter.addEventListener('change', render);
    render();
  </script>
</body>
</html>
